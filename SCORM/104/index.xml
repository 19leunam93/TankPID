<?xml version="1.0" encoding="utf-8"?><!DOCTYPE ContentObject SYSTEM "http://www.ilias.de/download/dtd/ilias_co_3_7.dtd"><!--Export of ILIAS Content Module 104 of installation 0.--><ContentObject Type="SCORM2004SCO"><MetaData><General Structure="Hierarchical"><Identifier Catalog="ILIAS" Entry="il_0_sco_104"/><Title Language="de">FlatTank Modell</Title><Language Language="de"/><Description Language="de"></Description><Keyword Language="de"/></General></MetaData><PageObject><MetaData><General Structure="Hierarchical"><Identifier Catalog="ILIAS" Entry="il_0_page_121"/><Title Language="de">Versuchsaufbau</Title><Language Language="de"/><Description Language="de"/><Keyword Language="de"/></General></MetaData><PageContent PCID="8f77f54e4daec1af990483d7724d16ef"><Grid><GridCell WIDTH_XS="" WIDTH_S="12" WIDTH_M="6" WIDTH_L="6" WIDTH_XL="6" PCID="3c94dcb4df17e1c79c338989649bd6c6"><PageContent PCID="f1220d09ef3e8734c9b97835fa526145"><Paragraph Language="de" Characteristic="Headline3">Laborversuch</Paragraph></PageContent><PageContent PCID="9341b729af680b34a32b4e3e2829db30"><MediaObject><MediaAlias OriginId="il_0_mob_4245821"/><MediaAliasItem Purpose="Standard"><Layout HorizontalAlign="Center" Width="151" Height="250"/></MediaAliasItem></MediaObject></PageContent></GridCell><GridCell WIDTH_XS="" WIDTH_S="12" WIDTH_M="6" WIDTH_L="6" WIDTH_XL="6" PCID="ed7c155d677cd696a57d5718dd3c923b"><PageContent PCID="fb550c2c255e9d8c03e734e0de642e22"><Paragraph Language="de" Characteristic="Headline3">Modellaufbau</Paragraph></PageContent><PageContent PCID="17f8b2885e6a58211c9333f06bd544ba"><MediaObject><MediaAlias OriginId="il_0_mob_4238836"/><MediaAliasItem Purpose="Standard"><Layout HorizontalAlign="Center" Width="405" Height="250"/></MediaAliasItem></MediaObject></PageContent></GridCell><GridCell WIDTH_XS="" WIDTH_S="" WIDTH_M="" WIDTH_L="" WIDTH_XL="" PCID="82ab1d133960c43713badc12b8fcda52"/></Grid></PageContent><PageContent PCID="9864746d673e291bfca10174f4d43b20"><Paragraph Language="de" Characteristic="Standard">Wir möchten nun ein Modell mit Modelica erstellen, welches den Versuchsaufbau aus dem LRS-Labor abbildet. Dazu müssen wir unser Wassertank aus Kapitel 1 mit einem Wassereinlass ergänzen.<br/>Zusätzlich wollen wir einen Regler integrieren, welcher den Füllstand auf ein definierbaren Soll-Wert regelt. Dazu muss der Regler den aktuellen Füllstand messen und über das Ventil die Ausflussmenge beeinflussen. Ist der Regler richtig eingestellt, sollte so nach einer gewissen Zeit der Angestrebte Füllstand erreicht werden.</Paragraph></PageContent></PageObject><PageObject><MetaData><General Structure="Hierarchical"><Identifier Catalog="ILIAS" Entry="il_0_page_126"/><Title Language="de">Modellbildung</Title><Language Language="de"/><Description Language="de"/><Keyword Language="de"/></General></MetaData><PageContent PCID="011d86e08175714b364f9abfc11b9ea7"><MediaObject><MediaAlias OriginId="il_0_mob_4238836"/><MediaAliasItem Purpose="Standard"><Layout HorizontalAlign="Center"/></MediaAliasItem></MediaObject></PageContent><PageContent PCID="664079591f1d6336e73fcbe8b81409b4"><Paragraph Language="de" Characteristic="Standard">Für obiges Modell, sollen nun Gleichungen hergeleitet werden, welche wir später in unser Modelica Modell implementieren können. Sodass unser Modell sich so verhalten wird, wie der Versuchsaufbau im LRS-Labor.</Paragraph></PageContent><PageContent PCID="540cac3098bce94708a7a2ec5ee3da86"><Paragraph Language="de" Characteristic="Headline3">1. Tankmodell um einen Einlass ergänzen</Paragraph></PageContent><PageContent PCID="a09adf0eeb8b9d18e740634fcf476b5f"><Paragraph Language="de" Characteristic="Standard">Wir verwenden dazu die Differenzialgleichung aus Kapitel 2</Paragraph></PageContent><PageContent PCID="f078a8857fe30787f67a13a98e521631"><Paragraph Language="de" Characteristic="Standard">[tex]\frac {\mathrm{d}h}{\mathrm{d}t} = v_{zyl} = \frac{1}{A_{zyl}}(\dot{V}_{ein}-\dot{V}_{aus})[/tex]</Paragraph></PageContent><PageContent PCID="c1f18440be7a6dcb23b7336f48d1321f"><Paragraph Language="de" Characteristic="Standard">Wenn wir nun [tex]\dot{V}_{ein} = 0[/tex] setzen und für [tex]\dot{V}=A \cdot v[/tex] einsetzen, erhalten wir wieder die Gleichung aus Kapitel 2:</Paragraph></PageContent><PageContent PCID="f8e9e5daa56615d3b7becb486f6efb58"><Paragraph Language="de" Characteristic="Standard">[tex]\frac {\mathrm{d}h}{\mathrm{d}t} = - \frac{A_{aus}}{A_{zyl}}v_{aus} = - \frac{A_{aus}}{A_{zyl}}\sqrt{2gh}[/tex]</Paragraph></PageContent><PageContent PCID="9d450cabea812c1144312bbadc3b8fd2"><Paragraph Language="de" Characteristic="Standard">Um unseren Versuchsaufbau abbilden zu können müssen wir jedoch [tex]\dot{V}_{ein}[/tex] berücksichtigen. Somit ergibt sich:</Paragraph></PageContent><PageContent PCID="26cb32580ead222a8ccc73d527602e88"><Paragraph Language="de" Characteristic="Standard">[tex]\frac {\mathrm{d}h}{\mathrm{d}t} = \frac{1}{A_{zyl}}(\dot{V}_{ein}-A_{aus} \cdot \sqrt{2gh})[/tex]</Paragraph></PageContent><PageContent PCID="18235be95041dd35a63a2c7d17907103"><Paragraph Language="de" Characteristic="Headline3">2. Auslassventil integrieren</Paragraph></PageContent><PageContent PCID="e707e1ba5b7ffd95b0e76a1eb790dea9"><Paragraph Language="de" Characteristic="Standard">Bis jetzt hat der Auslass einen konstanten Querschnitt. Damit die Wirkung eines Ventils modelliert werden kann, muss die Querschnittsfläche skaliert werden mit der Stellung des Ventils. Dazu definieren wir</Paragraph></PageContent><PageContent PCID="add4959b9698401235d21c98208871dd"><Paragraph Language="de" Characteristic="Standard">[tex]A_{ventil} = \alpha_{ventil} \cdot A_{aus}[/tex]</Paragraph></PageContent><PageContent PCID="192c3df3146256a00c3390e7f7b5da52"><Paragraph Language="de" Characteristic="Standard">Damit ergibt sich mit Ventil</Paragraph></PageContent><PageContent PCID="f1165a9baa3bf4b0d99d3c5fd69e1d94"><Paragraph Language="de" Characteristic="Standard">[tex]\frac {\mathrm{d}h}{\mathrm{d}t} = \frac{1}{A_{zyl}}(\dot{V}_{ein}-\alpha_{ventil} \cdot A_{aus} \cdot \sqrt{2gh})[/tex]</Paragraph></PageContent><PageContent PCID="f880e544e11c304672d7aa7b413d6d8e"><Paragraph Language="de" Characteristic="Standard">Wobei [tex]\alpha_{ventil}[/tex] die Ventilstellung des Auslassventils darstellt. [tex]\alpha_{ventil}=0[/tex] Ventil geschlossen. [tex]\alpha_{ventil}=1[/tex] Ventil geöffnet.</Paragraph></PageContent><PageContent PCID="306e308c6059f2f54a89b74cc6964025"><Paragraph Language="de" Characteristic="Headline3">3. Regler</Paragraph></PageContent><PageContent PCID="dab9c098ffa39226a0f8941309b49254"><Paragraph Language="de" Characteristic="Standard">Im Versuchsaufbau wurde ein analoger, stetiger Standard-Regler (PID-Regler) verbaut. Deshalb werden wir in unserem Modell die Gleichung dieses Reglers verwenden</Paragraph></PageContent><PageContent PCID="cdab3c97fd06ff95f8ef4170833dbed1"><Paragraph Language="de" Characteristic="Standard">[tex]y = K_p \cdot e + K_I\int e \mathrm{d}t + K_D \frac{\mathrm{d}e}{\mathrm{d}t}[/tex]</Paragraph></PageContent><PageContent PCID="661fa912c7c6de43e397b71e7f575c73"><Paragraph Language="de" Characteristic="Standard">[tex]e = h_{set} - h_{ist}[/tex]</Paragraph></PageContent><PageContent PCID="971f033ff5bf1667a0ba3dd823495c02"><Paragraph Language="de" Characteristic="Standard">[tex]y[/tex]: Regelgrösse<br/>[tex]e[/tex]: Regeldifferenz<br/>[tex]h_{set}[/tex]: Führungsgrösse<br/>[tex]h_{ist}[/tex]: Messgrösse</Paragraph></PageContent></PageObject><PageObject><MetaData><General Structure="Hierarchical"><Identifier Catalog="ILIAS" Entry="il_0_page_122"/><Title Language="de">Modelica Modell</Title><Language Language="de"/><Description Language="de"/><Keyword Language="de"/></General></MetaData><PageContent PCID="b147b2be09f1f67c2cde9aa149ef72f1"><Paragraph Language="de" Characteristic="Standard">Untenstehend ist das implementierte Modelica-Modell. Versuche mithilfe der zuvor angeschauten Modellbildung das Modell zu verstehen.</Paragraph></PageContent><PageContent PCID="29f6a775fd8fd40f4c113d526a6298a2"><Paragraph Language="de" ShowLineNumbers="y" SubCharacteristic="delphi" Characteristic="Code">model FlatTank<br/><br/>  extends Modelica.Icons.Example;<br/>  import g = Modelica.Constants.g_n;<br/><br/>  // Tank related variables and parameters<br/>  parameter Real qInflow(unit="m3/s") = 0.1     "Flow through input valve";<br/>  parameter Real A_zyl(unit="m2") = 1           "Cross sectional area of the tank";<br/>  parameter Real A_out(unit="m2") = 0.04        "Cross sectional area of outflow tube";<br/>  parameter Real h0(unit="m") = 0               "Initial filling level";<br/>  Real           A_valve(unit="m2")             "Cross sectional area of the valve"<br/>  Real           h(start=h0,unit="m")           "Tank filling level";<br/>  Real           qOutflow(unit="m3/s")          "Flow through output valve";<br/><br/>  // Controller related variables and parameters<br/>  parameter Real K_p = 0.1                "p-Gain";<br/>  parameter Real K_i = 1                  "i-Gain";<br/>  parameter Real K_d = 1                  "d-Gain";<br/>  parameter Real T(unit="s") = 1          "Time constant of the tank system";<br/>  parameter Real h_setpoint = 1           "Setpoint level for control";<br/>  Real           alpha(min=0, max=1)      "Valve opening in the range [0-1]";<br/><br/>  Modelica.Blocks.Continuous.LimPID PID(<br/>    k = K_p,<br/>    Ti = K_i,<br/>    Td = K_d,<br/>    yMax = 1,<br/>    yMin = 0<br/>  )<br/>  annotation (Placement(transformation(extent={{-10,-10},{10,10}})));<br/><br/><br/>equation<br/><br/>  assert(h&amp;gt;=0, "Tank filling level must be greater or equal to zero");<br/><br/>  der(h) = (qInflow - qOutflow)/A_zyl;              // Mass balance equation<br/>  qOutflow = A_valve * sqrt(2 * g * h);             // Flow through output - by torricelli<br/>  A_valve = alpha * A_out;                          // Valve in the output-tube<br/>  <br/><br/>  //defining the input/output values fot the PID controller<br/>  PID.u_s = h;                                      // measured variable (filling level)<br/>  PID.u_m = h_setpoint;                             // reference value/setpoint (filling level)<br/>  opening = PID.y;                                  // control variable (valve opening)<br/><br/>annotation (<br/>    experiment(<br/>      StopTime=180,<br/>      __Dymola_NumberOfIntervals=1000,<br/>      Tolerance=1e-06));<br/>end FlatTank;</Paragraph></PageContent><PageContent PCID="0e2a0404aa987a12b0e313f745d6491d"><Paragraph Language="de" Characteristic="Standard">Den guten Beobachtern ist sicher aufgefallen, dass die Gleichungen für den PID Regler fehlen, bzw. anders implementiert wurden, als zuvor theoretisch angegeben. Die Gleichung von vorher ist ein theoretischer Regler. D.h er ist im stande die Stellgrösse beliebig anzupassen, um die bestmögliche performance zu liefern. In der Praxis ist dies nicht möglich, da unsere Stellgrösse ([tex]\alpha_ventil[/tex]: Ventilöffnung) mechanisch begrenzt ist. Das Ventil kann nur zwischen 0 (geschlossen) und 1 (geöffnet) vertsellt werden.<br/>Es muss also ein Regler genommen werden, welcher einen begrenzten Outup und eine Anti-Windup kompensation besitzt. Deshalb wurde stattdessen ein PID-Regler aus der Standardbibliothek von Modelica verwendet.<br/>Mit dem Befehl "Modelica.Blocks.Continuous.LimPID" wird aus der Bibliothek Modelica dessen Kategorie Blocks und Unterkategorie Continuous die Komponente mit dem Namen LimPID geladen und in unser Modell integriert.</Paragraph></PageContent><PageContent PCID="36198be4d8ccc6bcca1cbd4f527adc1e"><Paragraph Language="de" Characteristic="Standard">Dies ist das Blockschaltbild des verwendeten PID-Reglers (LimPID):</Paragraph></PageContent><PageContent PCID="9106780fc85c29c13533fe7b3e9e1484"><MediaObject><MediaAlias OriginId="il_0_mob_4251390"/><MediaAliasItem Purpose="Standard"><Layout HorizontalAlign="Center" Width="400"/></MediaAliasItem><MediaAliasItem Purpose="Fullscreen"><Layout/></MediaAliasItem></MediaObject></PageContent></PageObject><MediaObject><MetaData><General Structure="Hierarchical"><Identifier Catalog="ILIAS" Entry="il_0_mob_4245821"/><Title Language="de">Laborversuch</Title><Language Language="de"/><Description Language="de">image/jpeg</Description><Keyword Language="de"/></General></MetaData><MediaItem Purpose="Standard"><Location Type="LocalFile">20190116_152205_0_300.jpg</Location><Format>image/jpeg</Format><Layout Width="181" Height="298" HorizontalAlign="Left" /></MediaItem><MediaItem Purpose="Fullscreen"><Location Type="LocalFile">20190116_152205_0_300.jpg</Location><Format>image/jpeg</Format><Layout    /></MediaItem></MediaObject><MediaObject><MetaData><General Structure="Hierarchical"><Identifier Catalog="ILIAS" Entry="il_0_mob_4238836"/><Title Language="de">FlatTank</Title><Language Language="de"/><Description Language="de">image/png</Description><Keyword Language="de"/></General></MetaData><MediaItem Purpose="Standard"><Location Type="LocalFile">Tank_Image-01_500_0.png</Location><Format>image/png</Format><Layout Width="500" Height="309" HorizontalAlign="Left" /></MediaItem></MediaObject><MediaObject><MetaData><General Structure="Hierarchical"><Identifier Catalog="ILIAS" Entry="il_0_mob_4251390"/><Title Language="de">LimPID</Title><Language Language="de"/><Description Language="de">image/jpeg</Description><Keyword Language="de"/></General></MetaData><MediaItem Purpose="Standard"><Location Type="LocalFile">PID.JPG</Location><Format>image/jpeg</Format><Layout   HorizontalAlign="Left" /></MediaItem><MediaItem Purpose="Fullscreen"><Location Type="LocalFile">PID.JPG</Location><Format>image/jpeg</Format><Layout    /></MediaItem></MediaObject></ContentObject>